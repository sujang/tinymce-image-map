!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.freeze({RECTANGLE:"rect",CIRCLE:"circle",POLYGON:"polygon"});t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=o(n(1)),r=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Date.now(),this.startPoint,this.endPoint,this.moveOffSet,this.dimensions={frame:{},shape:{}},this.context=t,this.drawing=!0,this.moving=!1,this.selected=!1,this.resizing=!1,this.path=new Path2D,this.strokeStyle="#000",this.href=""}return i(e,[{key:"draw",value:function(){console.warn("Implement method to render the shape")}},{key:"getArea",value:function(){console.warn("Implement method to return the shapes area in pixels")}},{key:"getAreaCoords",value:function(){console.warn("Implement method to return the coordinates of the shape")}},{key:"updateDimensions",value:function(){console.warn("Implement method to update the shape's dimensions/points")}},{key:"updateCoordinates",value:function(){console.warn("Implement method to update the shape's location on canvas")}},{key:"calcDrawCoords",value:function(){console.warn("Implement method to update shape's draw coordinates")}},{key:"contains",value:function(e){return this.context.isPointInPath(this.path,e.x,e.y)}},{key:"setMoveOffset",value:function(e){var t={x:e.x-this.startPoint.x,y:e.y-this.startPoint.y},n=t.x,i=t.y;return this.moveOffSet=new s.default(n,i),this}},{key:"updateStartPoint",value:function(e){var t={x:e.x-this.moveOffSet.x,y:e.y-this.moveOffSet.y},n=t.x,i=t.y;return this.startPoint=new s.default(n,i),this}},{key:"updateEndPoint",value:function(e){return this.endPoint=e,this}},{key:"drag",value:function(){return this.moving=!0,this}},{key:"drop",value:function(){return this.moving=!1,this}},{key:"select",value:function(){return this.selected=!0,this.strokeStyle="#C80000",this}},{key:"deselect",value:function(){return this.selected=!1,this.strokeStyle="#000",this}},{key:"finishDrawing",value:function(){return this.drawing=!1,this}},{key:"setDrawCoords",value:function(e){return this.startPoint=e.start,this.endPoint=e.end,this.moveOffSet=e.start,this}},{key:"setShapeDimensions",value:function(e){return this.dimensions.shape=e,this}},{key:"setHref",value:function(e){return this.href=e,this}},{key:"inUse",value:function(){return this.drawing||this.moving||this.resizing}},{key:"toMapArea",value:function(){return new r.default(this.type,this.getAreaCoords(),this.href)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(18)),s=a(n(17)),r=a(n(16)),o=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=t.context,a=t.drawCoords,u=t.areaCoords,c=t.href,h=void 0;switch(e){case o.default.CIRCLE:h=new i.default(n);break;case o.default.RECTANGLE:h=new s.default(n);break;case o.default.POLYGON:h=new r.default(n);break;default:throw new Error("Invalid shape passed to constructor: "+(void 0).shape)}return a&&h.setDrawCoords(a),u&&h.setShapeDimensions(u).calcDrawCoords().finishDrawing(),c&&h.setHref(c),h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=o(n(0)),r=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shape=t,this.coords="string"==typeof n?n:this.formatCoordsToString(n),this.href=i,this.target="_blank"}return i(e,[{key:"formatCoordsToString",value:function(e){switch(this.shape){case s.default.CIRCLE:return e.cx+","+e.cy+","+e.r;case s.default.RECTANGLE:return e.x+","+e.y+","+(e.x+e.w)+","+(e.y+e.h);case s.default.POLYGON:return e.map(function(e){return e.x+","+e.y}).join(",");default:throw new Error("Invalid shape passed to constructor")}}},{key:"formatCoordsToObjectDimensions",value:function(e){var t=e.split(",").map(function(e){return Number(e)});switch(this.shape){case s.default.CIRCLE:return{cx:Number(t[0]),cy:Number(t[1]),r:Number(t[2])};case s.default.RECTANGLE:return{x:t[0],y:t[1],w:Math.round(t[2]-t[0]),h:Math.round(t[3]-t[1])};case s.default.POLYGON:for(var n=[],i=0;i<t.length;i+=2){var r={x:t[i],y:t[i+1]};n.push(r)}return n}}},{key:"toShape",value:function(e){var t=this.formatCoordsToObjectDimensions(this.coords);return new r.default(this.shape,{areaCoords:t,context:e,href:this.href})}}]),e}();t.default=a},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var s,r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(s=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")})}},function(e,t,n){var i={},s=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),r=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),o=null,a=0,u=[],c=n(5);function h(e,t){for(var n=0;n<e.length;n++){var s=e[n],r=i[s.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](s.parts[o]);for(;o<s.parts.length;o++)r.parts.push(v(s.parts[o],t))}else{var a=[];for(o=0;o<s.parts.length;o++)a.push(v(s.parts[o],t));i[s.id]={id:s.id,refs:1,parts:a}}}}function f(e,t){for(var n=[],i={},s=0;s<e.length;s++){var r=e[s],o=t.base?r[0]+t.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}function d(e,t){var n=r(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=r(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,s)}}function l(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function p(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),d(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,i,s,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var u=a++;n=o||(o=p(t)),i=g.bind(null,n,u,!1),s=g.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),d(e,t),t}(t),i=function(e,t,n){var i=n.css,s=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&s;(t.convertToAbsoluteUrls||r)&&(i=c(i));s&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var o=new Blob([i],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}.bind(null,n,t),s=function(){l(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(t),i=function(e,t){var n=t.css,i=t.media;i&&e.setAttribute("media",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),s=function(){l(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else s()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return h(n,t),function(e){for(var s=[],r=0;r<n.length;r++){var o=n[r];(a=i[o.id]).refs--,s.push(a)}e&&h(f(e,t),t);for(r=0;r<s.length;r++){var a;if(0===(a=s[r]).refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete i[a.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function g(e,t,n,i){var s=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=y(t,s);else{var r=document.createTextNode(s),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var s=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(i),r=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(r).concat([s]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(i[r]=!0)}for(s=0;s<e.length;s++){var o=e[s];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,"#img-map-container {\n  display: flex;\n  flex-direction: column;\n}\n\n#img-map-canvas {\n  border: 1px solid #AAAAAA;\n}\n\n#img-map-actions, #img-map-form {\n  display: flex;\n  align-items: center;\n  padding: 8px .0 .0 3px;\n  height: auto;\n  line-height: 20px;\n}\n\n#img-map-actions {\n  justify-content: space-between;\n}\n\n#img-map-actions .img-map-btn {\n  height: 28px;\n  border: 1px solid #b3b3b3;\n  text-shadow: 0 1px 1px rgba(255,255,255,0.75);\n  padding: 4px 6px;\n  cursor: pointer;\n  /* background-color: aquamarine; */\n  box-sizing: border-box;\n}\n\n#img-map-actions .img-map-shape-select {\n  padding-right: .8px;\n}\n\n#img-map-form .img-map-url-input{\n  width: 100%;\n  margin-left: 16px;\n  padding: 5px 6px;\n  border: 1px solid #b3b3b3;\n}\n\n::placeholder {\n  color: #c3c3c3;\n}",""])},function(e,t,n){var i=n(8);"string"==typeof i&&(i=[[e.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(6)(i,s);i.locals&&(e.exports=i.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.freeze({DRAW:"draw",MOVE:"move",RESIZE:"resize"});t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e&&e.__esModule}(n(1));t.default={onMouseDown:function(e,t,n){},onMouseMove:function(e,t,n){},onMouseUp:function(e,t,n){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={onMouseDown:function(e,t){e.focusedShape.select().drag().setMoveOffset(t)},onMouseMove:function(e,t){e.focusedShape.updateStartPoint(t).updateCoordinates()},onMouseUp:function(e){e.focusedShape.drop()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3)),s=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o={onMouseDown:function(e,t,n){var s={start:t,end:t};e.shapeInProgress?n.shiftKey?(e.shapeInProgress.updateEndPoint(t).updateDimensions(),a.call(e)):e.shapeInProgress.updateEndPoint(t).updateDimensions():(e.shapeInProgress=(0,i.default)(e.currentDrawShape,{context:e.context,drawCoords:s}),e.shapeInProgress.updateDimensions(),e.shapes.push(e.shapeInProgress))},onMouseMove:function(e,t){e.shapeInProgress&&(e.shapeInProgress.type===s.default.POLYGON?e.shapeInProgress.updateEndPoint(t).updateDimensions(!0):e.shapeInProgress.updateEndPoint(t).updateDimensions())},onMouseUp:function(e){e.shapeInProgress&&e.shapeInProgress.type!==s.default.POLYGON&&a.call(e)}};function a(){this.shapeInProgress.finishDrawing(),this.shapeInProgress=void 0,this.shapes=this.shapes.filter(u)}function u(e){return e.getArea()>300}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(13)),s=o(n(12)),r=o(n(11));function o(e){return e&&e.__esModule?e:{default:e}}var a={draw:i.default,move:s.default,resize:r.default};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=u(n(14)),r=u(n(10)),o=u(n(1)),a=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.args=t,this.canvas=t.canvas,this.context=this.canvas.getContext("2d"),this.shapeSelectors=t.shapeSelectors,this.currentDrawShape,this.currentAction,this.shapeInProgress,this.focusedShape,this.shapes=[],this.isMouseDown=!1,this.img,this.urlInput=t.urlInput,this.canvas.addEventListener("mousedown",function(e){return n.mouseDown(e)},!1),this.canvas.addEventListener("mousemove",function(e){return n.mouseMove(e)},!1),this.canvas.addEventListener("mouseup",function(e){return n.mouseUp(e)},!1),this.urlInput.addEventListener("change",function(e){return n.focusedShape.setHref(e.target.value)}),this.shapeSelectors.forEach(function(e){return e.addEventListener("change",function(){return n.setShape()},!1)})}return i(e,[{key:"render",value:function(){this.canvas.getContext&&(this.clearCanvas(),this.drawImage(),this.shapes.forEach(function(e){return e.draw()}))}},{key:"mouseDown",value:function(e){if(0===e.button){this.isMouseDown=!0;var t=this.getMouseCoords(e);this.determineAction(t),s.default[this.currentAction].onMouseDown(this,t,e),this.render()}e.preventDefault()}},{key:"mouseMove",value:function(e){if(this.isMouseDown||this.shapeInProgress&&this.shapeInProgress.inUse()){var t=this.getMouseCoords(e);s.default[this.currentAction].onMouseMove(this,t,e),this.render()}e.preventDefault()}},{key:"mouseUp",value:function(e){if(this.isMouseDown){this.isMouseDown=!1;var t=this.getMouseCoords(e);s.default[this.currentAction].onMouseUp(this,t,e),this.render()}e.preventDefault()}},{key:"getMouseCoords",value:function(e){var t=this.canvas.getBoundingClientRect(),n=Math.round(e.clientX-t.left),i=Math.round(e.clientY-t.top);return new o.default(n,i)}},{key:"clearCanvas",value:function(e){e&&(this.shapeInProgress=void 0,this.focusedShape=void 0,this.shapes=[]),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawImage()}},{key:"setShape",value:function(){var e=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.shapeSelectors)),t=e.find(function(e){return e.checked});this.currentDrawShape=void 0!==t?a.default[t.value.toUpperCase()]:a.default.CIRCLE,t||(e.find(function(e){return e.value===a.default.CIRCLE}).checked=!0)}},{key:"determineAction",value:function(e){var t=this.shapes.find(function(t){return t.contains(e)});if(t){if(t.drawing)return;this.setFocusedShape(t),this.currentAction=r.default.MOVE}else this.setFocusedShape(),this.currentAction=r.default.DRAW}},{key:"setFocusedShape",value:function(e){e?(this.removeFocusedShape(),this.focusedShape=e,this.urlInput.value=this.focusedShape.href):(this.removeFocusedShape(),this.urlInput.value="")}},{key:"removeFocusedShape",value:function(){this.focusedShape&&(this.urlInput.blur(),this.focusedShape.deselect())}},{key:"deleteMap",value:function(){if(this.focusedShape){var e=this.shapes.findIndex(function(e){return e.selected});this.shapes.splice(e,1),this.focusedShape=void 0,this.render()}}},{key:"loadImage",value:function(){var e=this;this.img=new Image,this.img.onload=function(){e.drawImage(),e.shapes.forEach(function(e){return e.draw()})},this.img.height=this.args.img.height,this.img.width=this.args.img.width,this.img.src=this.args.img.src}},{key:"drawImage",value:function(){var e,t=[0,0,this.canvas.width,this.canvas.height];this.context.imageSmoothingEnabled=!1,(e=this.context).drawImage.apply(e,[this.img].concat(t))}},{key:"init",value:function(){var e=this;this.setShape(),this.loadImage(),this.args.map.areas.forEach(function(t){var n=t.toShape(e.context);e.shapes.push(n)})}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="polygon",n.dimensions.shape=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"draw",value:function(){var e=this;this.path=new Path2D,this.path.moveTo(this.dimensions.shape[0].x,this.dimensions.shape[0].y),this.dimensions.shape.forEach(function(t){e.path.lineTo(t.x,t.y)}),this.drawing&&this.path.lineTo(this.endPoint.x,this.endPoint.y),this.path.closePath(),this.context.strokeStyle=this.strokeStyle,this.context.stroke(this.path)}},{key:"getArea",value:function(){var e=this.dimensions.shape,t=e.length,n=0,i=t-1;if(t>2)for(var s=0;s<t;s++)n+=e[i].x*e[s].y,n-=e[s].x*e[i].y,i=s;return Math.round(Math.abs(n)/2)}},{key:"getAreaCoords",value:function(){return this.dimensions.shape}},{key:"updateDimensions",value:function(e){var t=this;if(!e)return this.dimensions.shape.find(function(e){return e.x===t.endPoint.x&&e.y===t.endPoint.y})||this.dimensions.shape.push({x:Math.round(this.endPoint.x),y:Math.round(this.endPoint.y)}),this.dimensions.shape=this.dimensions.shape,this}},{key:"updateCoordinates",value:function(){var e=this.startPoint.x-Math.abs(this.dimensions.shape[0].x),t=this.startPoint.y-Math.abs(this.dimensions.shape[0].y),n=this.dimensions.shape.map(function(n){return{x:n.x+e,y:n.y+t}});return this.dimensions.shape=n,this}},{key:"calcDrawCoords",value:function(){return this.startPoint=this.dimensions.shape[0],this.endPoint=Object.assign({},this.startPoint),this.moveOffSet=Object.assign({},this.startPoint),this}}]),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="rect",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"draw",value:function(){this.path=new Path2D,this.path.rect(this.dimensions.shape.x,this.dimensions.shape.y,this.dimensions.shape.w,this.dimensions.shape.h),this.context.strokeStyle=this.strokeStyle,this.context.stroke(this.path)}},{key:"getArea",value:function(){return this.dimensions.shape.w*this.dimensions.shape.h}},{key:"getAreaCoords",value:function(){return this.dimensions.shape}},{key:"updateDimensions",value:function(){var e=this.endPoint.x-this.startPoint.x,t=this.endPoint.y-this.startPoint.y;return this.dimensions.shape={x:this.startPoint.x,y:this.startPoint.y,w:Math.round(e),h:Math.round(t)},this.dimensions.frame=Object.assign({},this.dimensions.shape),this}},{key:"updateCoordinates",value:function(){return this.dimensions.shape=Object.assign(this.dimensions.shape,{x:this.startPoint.x,y:this.startPoint.y}),this.dimensions.frame=Object.assign({},this.dimensions.shape),this}},{key:"calcDrawCoords",value:function(){return this.startPoint={x:this.dimensions.shape.x,y:this.dimensions.shape.y},this.endPoint={x:this.dimensions.shape.x+this.dimensions.shape.w,y:this.dimensions.shape.y+this.dimensions.shape.h},this.moveOffSet=Object.assign({},this.startPoint),this}}]),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="circle",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"draw",value:function(){this.drawing&&(this.context.strokeStyle="#E2E2E2",this.context.strokeRect(this.dimensions.frame.x,this.dimensions.frame.y,this.dimensions.frame.w,this.dimensions.frame.h)),this.path=new Path2D,this.path.arc(this.dimensions.shape.cx,this.dimensions.shape.cy,Math.abs(this.dimensions.shape.r),0,2*Math.PI,!1),this.path.closePath(),this.context.strokeStyle=this.strokeStyle,this.context.stroke(this.path)}},{key:"getArea",value:function(){var e=this.getAreaCoords().r;return Math.round(Math.PI*Math.pow(e,2))}},{key:"getAreaCoords",value:function(){return{cx:this.dimensions.shape.cx,cy:this.dimensions.shape.cy,r:this.dimensions.shape.r}}},{key:"updateDimensions",value:function(){this.calculateBoundingBox();var e={cx:Math.round(this.dimensions.frame.x+this.dimensions.frame.w/2),cy:Math.round(this.dimensions.frame.y+this.dimensions.frame.h/2),r:Math.round(Math.abs(this.dimensions.frame.w/2))};return this.dimensions.shape=e,this}},{key:"updateCoordinates",value:function(){return this.dimensions.frame=Object.assign(this.dimensions.frame,{x:this.startPoint.x,y:this.startPoint.y}),this.dimensions.shape=Object.assign(this.dimensions.shape,{cx:Math.round(this.dimensions.frame.x+this.dimensions.frame.w/2),cy:Math.round(this.dimensions.frame.y+this.dimensions.frame.h/2),r:Math.round(Math.abs(this.dimensions.frame.w/2))}),this}},{key:"calcDrawCoords",value:function(){return this.startPoint={x:Math.round(this.dimensions.shape.cx-this.dimensions.shape.r),y:Math.round(this.dimensions.shape.cy-this.dimensions.shape.r)},this.endPoint={x:Math.round(this.dimensions.shape.cx+this.dimensions.shape.r),y:Math.round(this.dimensions.shape.cy+this.dimensions.shape.r)},this.moveOffSet=Object.assign({},this.startPoint),this.calculateBoundingBox(),this}},{key:"calculateBoundingBox",value:function(){var e=0,t=0,n=Math.abs(this.endPoint.x-this.startPoint.x),i=Math.abs(this.endPoint.y-this.startPoint.y);return n<i?(e=n*(this.endPoint.x<this.startPoint.x?-1:1),t=n*(this.endPoint.y<this.startPoint.y?-1:1)):(e=i*(this.endPoint.x<this.startPoint.x?-1:1),t=i*(this.endPoint.y<this.startPoint.y?-1:1)),this.dimensions.frame={x:this.startPoint.x,y:this.startPoint.y,w:Math.round(e),h:Math.round(t)},this}}]),t}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(4));var s={load:function(e){return e.map(function(e){return new i.default(e.shape,e.coords,e.href)})},write:function(e,t){var n=document.app,i=e.dom.select("map").length>0?e.dom.select("map")[0]:function(e,t){var n=t.parentNode,i=function(e){for(var t="tinymce-map",n=1;e.find(function(e){return e.name===t});)t="tinymce-map"+n,n++;return t}(Array.from(e.dom.select("map")));return e.dom.add(n,"map",{id:i,name:i}),t.useMap=i,e.dom.select("map")[0]}(e,t);!function(e){if(e)for(var t=Array.from(e.children),n=0;n<t.length;n++)e.removeChild(t[n])}(i),n.shapes.forEach(function(t){var n=t.toMapArea(),s=Object.assign(e.dom.create("area"),n);i.append(s)})}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(19)),s=r(n(15));function r(e){return e&&e.__esModule?e:{default:e}}n(9);var o={createDialogHtml:function(e){return new Promise(function(t){var n=document.getElementById("img-map-container"),i=e.dom.create("canvas",{id:"img-map-canvas"});n.appendChild(i);var s=e.dom.create("div",{id:"img-map-actions"});s.innerHTML='\n    <span class="img-map-selection">\n      <span class="img-map-shape-select">\n        <input type="radio" name="shapeSelect" id="shape1" value="circle">\n        <label for="shape1">Circle</label>\n      </span>\n      <span class="img-map-shape-select">\n        <input type="radio" name="shapeSelect" id="shape2" value="rectangle">\n        <label for="shape2">Rectangle</label>\n      </span>\n      <span class="img-map-shape-select">\n        <input type="radio" name="shapeSelect" id="shape3" value="polygon">\n        <label for="shape3">Polygon</label>\n      </span>\n    </span>\n    <span class="img-map-buttons">\n      <button type="button" class="img-map-btn" onclick="app.clearCanvas(true)">Clear</button>\n      <button type="button" class="img-map-btn" onclick="app.deleteMap()">Delete Focused</button>\n    </span>\n  ',n.appendChild(s);var r=e.dom.create("form",{id:"img-map-form"});r.innerHTML='\n    <label for="url">URL: </label>\n    <input type="url" id="map-url-input" name="map-url-input" class="img-map-url-input" placeholder="https://www.validurl.com" required/>\n  ',n.appendChild(r),t(n)})},initApp:function(e,t){var n=e.dom.select("map").find(function(e){return e.name===t.useMap}),r=""===t.useMap?[]:i.default.load(Array.from(n.children)),o=document.getElementById("img-map-canvas");o.setAttribute("height",t.height),o.setAttribute("width",t.width);var a=document.getElementById("map-url-input"),u=document.getElementsByName("shapeSelect"),c={canvas:o,img:{src:t.src,height:t.height,width:t.width,useMap:t.useMap},map:{name:t.useMap,areas:r},shapeSelectors:u,urlInput:a},h=new s.default(c);document.app=h,h.init()},destroy:function(e,t){document.getElementById("map-url-input").blur(),i.default.write(e,t),document.app={},document.getElementById("img-map-container").innerHTML=""}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(20));var s=function(e){if("IMG"===e.selection.getNode().nodeName){var t=e.selection.getNode();e.windowManager.open({title:"Manage Image Maps",body:[{type:"container",layout:"flex",direction:"column",align:"center",html:'<div id="img-map-container"></div>',minHeight:t.height+80,minWidth:t.width}],buttons:[{text:"Done",onclick:"submit"}],onsubmit:function(){i.default.destroy(e,t)}}),i.default.createDialogHtml(e).then(function(){return i.default.initApp(e,t)})}};t.default=function(e){e.addMenuItem("tinymceImageMap",{text:"Image Map",onclick:function(){return s(e)}}),e.addButton("tinymceImageMap",{text:"Image Map",icon:!1,onclick:function(){return s(e)}})}},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(n(21));tinymce.PluginManager.add("tinymceImageMap",i.default)}]);