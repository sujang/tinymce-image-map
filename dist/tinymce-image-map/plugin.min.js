!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=24)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.freeze({RECTANGLE:"rect",CIRCLE:"circle",POLYGON:"polygon"});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(1)),o=s(n(4));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=Date.now(),this.startPoint,this.endPoint,this.moveOffSet,this.dimensions={frame:{},shape:{}},this.context=e,this.drawing=!0,this.moving=!1,this.selected=!1,this.resizing=!1,this.path=new Path2D,this.strokeStyle="#000",this.href=""}return r(t,[{key:"draw",value:function(){console.warn("Implement method to render the shape")}},{key:"getArea",value:function(){console.warn("Implement method to return the shapes area in pixels")}},{key:"getAreaCoords",value:function(){console.warn("Implement method to return the coordinates of the shape")}},{key:"updateDimensions",value:function(){console.warn("Implement method to update the shape's dimensions/points")}},{key:"updateCoordinates",value:function(){console.warn("Implement method to update the shape's location on canvas")}},{key:"calcDrawCoords",value:function(){console.warn("Implement method to update shape's draw coordinates")}},{key:"contains",value:function(t){return this.context.isPointInPath(this.path,t.x,t.y)}},{key:"setMoveOffset",value:function(t){var e={x:t.x-this.startPoint.x,y:t.y-this.startPoint.y},n=e.x,r=e.y;return this.moveOffSet=new i.default(n,r),this}},{key:"updateStartPoint",value:function(t){var e={x:t.x-this.moveOffSet.x,y:t.y-this.moveOffSet.y},n=e.x,r=e.y;return this.startPoint=new i.default(n,r),this}},{key:"updateEndPoint",value:function(t){return this.endPoint=t,this}},{key:"drag",value:function(){return this.moving=!0,this}},{key:"drop",value:function(){return this.moving=!1,this}},{key:"select",value:function(){return this.selected=!0,this.strokeStyle="#C80000",this}},{key:"deselect",value:function(){return this.selected=!1,this.strokeStyle="#000",this}},{key:"finishDrawing",value:function(){return this.drawing=!1,this}},{key:"setDrawCoords",value:function(t){return this.startPoint=t.start,this.endPoint=t.end,this.moveOffSet=t.start,this}},{key:"setShapeDimensions",value:function(t){return this.dimensions.shape=t,this}},{key:"setHref",value:function(t){return this.href=t,this}},{key:"inUse",value:function(){return this.drawing||this.moving||this.resizing}},{key:"toMapArea",value:function(){return new o.default(this.type,this.getAreaCoords(),this.href)}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(20)),i=a(n(19)),o=a(n(18)),s=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=e.context,a=e.drawCoords,u=e.areaCoords,c=e.href,h=void 0;switch(t){case s.default.CIRCLE:h=new r.default(n);break;case s.default.RECTANGLE:h=new i.default(n);break;case s.default.POLYGON:h=new o.default(n);break;default:throw new Error("Invalid shape passed to constructor: "+(void 0).shape)}return a&&h.setDrawCoords(a),u&&h.setShapeDimensions(u).calcDrawCoords().finishDrawing(),c&&h.setHref(c),h}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=s(n(0)),o=s(n(3));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shape=e,this.coords="string"==typeof n?n:this.formatCoordsToString(n),this.href=r,this.target="_blank"}return r(t,[{key:"formatCoordsToString",value:function(t){switch(this.shape){case i.default.CIRCLE:return t.cx+","+t.cy+","+t.r;case i.default.RECTANGLE:return t.x+","+t.y+","+(t.x+t.w)+","+(t.y+t.h);case i.default.POLYGON:return t.map(function(t){return t.x+","+t.y}).join(",");default:throw new Error("Invalid shape passed to constructor")}}},{key:"formatCoordsToObjectDimensions",value:function(t){var e=t.split(",").map(function(t){return Number(t)});switch(this.shape){case i.default.CIRCLE:return{cx:Number(e[0]),cy:Number(e[1]),r:Number(e[2])};case i.default.RECTANGLE:return{x:e[0],y:e[1],w:Math.round(e[2]-e[0]),h:Math.round(e[3]-e[1])};case i.default.POLYGON:for(var n=[],r=0;r<e.length;r+=2){var o={x:e[r],y:e[r+1]};n.push(o)}return n}}},{key:"toShape",value:function(t){var e=this.formatCoordsToObjectDimensions(this.coords);return new o.default(this.shape,{areaCoords:e,context:t,href:this.href})}}]),t}();e.default=a},function(t,e){t.exports=canvas},function(t,e,n){!function(t,e){void 0==t&&(t=n(5).Context2d),void 0==t.prototype.ellipse&&(t.prototype.ellipse=function(t,e,n,r,i,o,s,a){this.save(),this.translate(t,e),this.rotate(i),this.scale(n,r),this.arc(0,0,1,o,s,a),this.restore()}),"function"==typeof Path2D&&"function"==typeof(new Path2D).addPath||function(){function e(t){if(this.ops_=[],void 0!=t)if("string"==typeof t)try{this.ops_=parser.parse(t)}catch(t){}else{if(!t.hasOwnProperty("ops_"))throw"Error: "+typeof t+"is not a valid argument to Path";this.ops_=t.ops_.slice(0)}}parser=function(){function t(t,e,n,r,i,o){this.message=t,this.expected=e,this.found=n,this.offset=r,this.line=i,this.column=o,this.name="SyntaxError"}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),{SyntaxError:t,parse:function(e){var n,r=arguments.length>1?arguments[1]:{},i={},o={svg_path:wt},s=wt,a=i,u=null,c=function(t){return Ut},h=/^[Mm]/,l={type:"class",value:"[Mm]",description:"[Mm]"},f=function(t,e){var n=t;Nt&&(n="M",Nt=!1),Ut.push({type:"moveTo",args:qt(n,e[0])});for(var r=1;r<e.length;r++)Ut.push({type:"lineTo",args:qt(t,e[r])})},p=function(t,e){return function(t,e){var n=[t];if(e&&e.length>1)for(var r=e[1],i=0;i<r.length;i++)n.push(r[i]);return n}(t,e)},d=/^[Zz]/,v={type:"class",value:"[Zz]",description:"[Zz]"},m=function(){Ut.push({type:"closePath",args:[]})},y=/^[Ll]/,g={type:"class",value:"[Ll]",description:"[Ll]"},b=function(t,e){for(var n=0;n<e.length;n++)Ut.push({type:"lineTo",args:qt(t,e[n])})},w=/^[Hh]/,x={type:"class",value:"[Hh]",description:"[Hh]"},M=function(t,e){for(var n=0;n<e.length;n++)Ut.push({type:"lineTo",args:Gt(t,e[n])})},P=/^[Vv]/,_={type:"class",value:"[Vv]",description:"[Vv]"},C=function(t,e){for(var n=0;n<e.length;n++)Ut.push({type:"lineTo",args:Yt(t,e[n])})},A=/^[Cc]/,k={type:"class",value:"[Cc]",description:"[Cc]"},O=function(t,e){for(var n=0;n<e.length;n++)Ut.push({type:"bezierCurveTo",args:Ht(t,e[n])})},S=function(t,e,n){return t.concat(e,n)},I=/^[Ss]/,j={type:"class",value:"[Ss]",description:"[Ss]"},E=function(t,e){for(var n=0;n<e.length;n++)Ut.push({type:"bezierCurveTo",args:zt().concat(Ht(t,e[n]))})},D=function(t,e){return t.concat(e)},T=/^[Qq]/,R={type:"class",value:"[Qq]",description:"[Qq]"},L=function(t,e){for(var n=0;n<e.length;n++)Ut.push({type:"quadraticCurveTo",args:Ht(t,e[n])})},U=/^[Tt]/,N={type:"class",value:"[Tt]",description:"[Tt]"},B=function(t,e){for(var n=0;n<e.length;n++){var r=zt();Ut.push({type:"quadraticCurveTo",args:r.concat(Ht(t,e[n]))}),Lt=r.slice(0)}},F=/^[Aa]/,q={type:"class",value:"[Aa]",description:"[Aa]"},H=function(t,e){for(var n=0;n<e.length;n++){var r=[Rt.slice()],i=[qt(t,e[n].slice(-2))];absArgs=r.concat(e[n].slice(0,-2),i),Zt.apply(this,absArgs)}},z=function(t,e,n,r,i,o){return[parseFloat(t),parseFloat(e),parseFloat(Ft(n).join("")),parseInt(r),parseInt(i),o[0],o[1]]},G=function(t,e){return[t,e]},Y=function(t){return parseFloat(Ft(t).join(""))},V="0",Q={type:"literal",value:"0",description:'"0"'},Z="1",$={type:"literal",value:"1",description:'"1"'},J=",",W={type:"literal",value:",",description:'","'},K=".",X={type:"literal",value:".",description:'"."'},tt=/^[eE]/,et={type:"class",value:"[eE]",description:"[eE]"},nt="+",rt={type:"literal",value:"+",description:'"+"'},it="-",ot={type:"literal",value:"-",description:'"-"'},st=/^[0-9]/,at={type:"class",value:"[0-9]",description:"[0-9]"},ut=function(t){return t.join("")},ct=/^[ \t\n\r]/,ht={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},lt=0,ft=0,pt={line:1,column:1,seenCR:!1},dt=0,vt=[],mt=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');s=o[r.startRule]}function yt(t){return ft!==t&&(ft>t&&(ft=0,pt={line:1,column:1,seenCR:!1}),function(t,n,r){var i,o;for(i=n;i<r;i++)"\n"===(o=e.charAt(i))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(pt,ft,t),ft=t),pt}function gt(t){lt<dt||(lt>dt&&(dt=lt,vt=[]),vt.push(t))}function bt(n,r,i){var o=yt(i),s=i<e.length?e.charAt(i):null;return null!==r&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(r),new t(null!==n?n:function(t,e){var n,r=new Array(t.length);for(n=0;n<t.length;n++)r[n]=t[n].description;return"Expected "+(t.length>1?r.slice(0,-1).join(", ")+" or "+r[t.length-1]:r[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(r,s),r,s,i,o.line,o.column)}function wt(){var t,n,r,o,s;for(t=lt,n=[],r=Tt();r!==i;)n.push(r),r=Tt();if(n!==i)if((r=function t(){var n,r,o,s,c;if(n=lt,(r=function(){var t,n,r,o,s;if(t=lt,(n=function(){var t,n,r,o;if(t=lt,h.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(l)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=function(){var t,e,n,r,o;return t=lt,(e=Pt())!==i?(n=lt,(r=Ot())===i&&(r=u),r!==i&&(o=xt())!==i?n=r=[r,o]:(lt=n,n=a),n===i&&(n=u),n!==i?(e=p(e,n),t=e):(lt=t,t=a)):(lt=t,t=a),t}())!==i?(n=f(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}())!==i){for(r=lt,o=[],s=Tt();s!==i;)o.push(s),s=Tt();o!==i&&(s=function t(){var n,r,o,s,c;if(n=lt,(r=function(){var t;return(t=function(){var t;return lt,d.test(e.charAt(lt))?(t=e.charAt(lt),lt++):(t=i,0===mt&&gt(v)),t!==i&&(t=m()),t}())===i&&(t=function(){var t,n,r,o;if(t=lt,y.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(g)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=xt())!==i?(n=b(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}())===i&&(t=function(){var t,n,r,o;if(t=lt,w.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(x)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=Mt())!==i?(n=M(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}())===i&&(t=function(){var t,n,r,o;if(t=lt,P.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(_)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=Mt())!==i?(n=C(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}())===i&&(t=function(){var t,n,r,o;if(t=lt,A.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(k)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=function t(){var e,n,r,o,s;return e=lt,(n=function(){var t,e,n,r,o,s;return t=lt,(e=Pt())!==i?((n=Ot())===i&&(n=u),n!==i&&(r=Pt())!==i?((o=Ot())===i&&(o=u),o!==i&&(s=Pt())!==i?(e=S(e,r,s),t=e):(lt=t,t=a)):(lt=t,t=a)):(lt=t,t=a),t}())!==i?(r=lt,(o=Ot())===i&&(o=u),o!==i&&(s=t())!==i?r=o=[o,s]:(lt=r,r=a),r===i&&(r=u),r!==i?(n=p(n,r),e=n):(lt=e,e=a)):(lt=e,e=a),e}())!==i?(n=O(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}())===i&&(t=function(){var t,n,r,o;if(t=lt,I.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(j)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=function t(){var e,n,r,o,s;return e=lt,(n=function(){var t,e,n,r;return t=lt,(e=Pt())!==i?((n=Ot())===i&&(n=u),n!==i&&(r=Pt())!==i?(e=D(e,r),t=e):(lt=t,t=a)):(lt=t,t=a),t}())!==i?(r=lt,(o=Ot())===i&&(o=u),o!==i&&(s=t())!==i?r=o=[o,s]:(lt=r,r=a),r===i&&(r=u),r!==i?(n=p(n,r),e=n):(lt=e,e=a)):(lt=e,e=a),e}())!==i?(n=E(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}())===i&&(t=function(){var t,n,r,o;if(t=lt,T.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(R)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=function t(){var e,n,r,o,s;return e=lt,(n=function(){var t,e,n,r;return t=lt,(e=Pt())!==i?((n=Ot())===i&&(n=u),n!==i&&(r=Pt())!==i?(e=D(e,r),t=e):(lt=t,t=a)):(lt=t,t=a),t}())!==i?(r=lt,(o=Ot())===i&&(o=u),o!==i&&(s=t())!==i?r=o=[o,s]:(lt=r,r=a),r===i&&(r=u),r!==i?(n=p(n,r),e=n):(lt=e,e=a)):(lt=e,e=a),e}())!==i?(n=L(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}())===i&&(t=function(){var t,n,r,o;if(t=lt,U.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(N)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=function t(){var e,n,r,o,s;return e=lt,(n=Pt())!==i?(r=lt,(o=Ot())===i&&(o=u),o!==i&&(s=t())!==i?r=o=[o,s]:(lt=r,r=a),r===i&&(r=u),r!==i?(n=p(n,r),e=n):(lt=e,e=a)):(lt=e,e=a),e}())!==i?(n=B(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}())===i&&(t=function(){var t,n,r,o;if(t=lt,F.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(q)),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i&&(o=function t(){var e,n,r,o,s;return e=lt,(n=function(){var t,e,n,r,o,s,c,h,l,f,p;return t=lt,(e=Ct())!==i?((n=Ot())===i&&(n=u),n!==i&&(r=Ct())!==i?((o=Ot())===i&&(o=u),o!==i&&(s=At())!==i&&Ot()!==i&&(c=kt())!==i?((h=Ot())===i&&(h=u),h!==i&&(l=kt())!==i?((f=Ot())===i&&(f=u),f!==i&&(p=Pt())!==i?(e=z(e,r,s,c,l,p),t=e):(lt=t,t=a)):(lt=t,t=a)):(lt=t,t=a)):(lt=t,t=a)):(lt=t,t=a),t}())!==i?(r=lt,(o=Ot())===i&&(o=u),o!==i&&(s=t())!==i?r=o=[o,s]:(lt=r,r=a),r===i&&(r=u),r!==i?(n=p(n,r),e=n):(lt=e,e=a)):(lt=e,e=a),e}())!==i?(n=H(n,o),t=n):(lt=t,t=a)}else lt=t,t=a;return t}()),t}())!==i){for(o=lt,s=[],c=Tt();c!==i;)s.push(c),c=Tt();s!==i&&(c=t())!==i?o=s=[s,c]:(lt=o,o=a),o===i&&(o=u),o!==i?n=r=[r,o]:(lt=n,n=a)}else lt=n,n=a;return n}())!==i?r=o=[o,s]:(lt=r,r=a),r===i&&(r=u),r!==i?t=n=[n,r]:(lt=t,t=a)}else lt=t,t=a;return t}())!==i){for(o=lt,s=[],c=Tt();c!==i;)s.push(c),c=Tt();s!==i&&(c=t())!==i?o=s=[s,c]:(lt=o,o=a),o===i&&(o=u),o!==i?n=r=[r,o]:(lt=n,n=a)}else lt=n,n=a;return n}())===i&&(r=u),r!==i){for(o=[],s=Tt();s!==i;)o.push(s),s=Tt();o!==i?t=n=c(r):(lt=t,t=a)}else lt=t,t=a;else lt=t,t=a;return t}function xt(){var t,e,n,r,o;return t=lt,(e=Pt())!==i?(n=lt,(r=Ot())===i&&(r=u),r!==i&&(o=xt())!==i?n=r=[r,o]:(lt=n,n=a),n===i&&(n=u),n!==i?t=e=p(e,n):(lt=t,t=a)):(lt=t,t=a),t}function Mt(){var t,e,n,r,o;return t=lt,(e=_t())!==i?(n=lt,(r=Ot())===i&&(r=u),r!==i&&(o=Mt())!==i?n=r=[r,o]:(lt=n,n=a),n===i&&(n=u),n!==i?t=e=p(e,n):(lt=t,t=a)):(lt=t,t=a),t}function Pt(){var t,e,n,r;return t=lt,(e=_t())!==i?((n=Ot())===i&&(n=u),n!==i&&(r=_t())!==i?t=e=G(e,r):(lt=t,t=a)):(lt=t,t=a),t}function _t(){var t;return lt,(t=At())!==i&&(t=Y(t)),t}function Ct(){var t;return(t=It())===i&&(t=Dt()),t}function At(){var t,e,n;return t=lt,(e=Et())===i&&(e=u),e!==i&&(n=It())!==i?t=e=[e,n]:(lt=t,t=a),t===i&&(t=lt,(e=Et())===i&&(e=u),e!==i&&(n=Dt())!==i?t=e=[e,n]:(lt=t,t=a)),t}function kt(){var t;return 48===e.charCodeAt(lt)?(t=V,lt++):(t=i,0===mt&&gt(Q)),t===i&&(49===e.charCodeAt(lt)?(t=Z,lt++):(t=i,0===mt&&gt($))),t}function Ot(){var t,e,n,r,o;if(t=lt,e=[],(n=Tt())!==i)for(;n!==i;)e.push(n),n=Tt();else e=a;if(e!==i)if((n=St())===i&&(n=u),n!==i){for(r=[],o=Tt();o!==i;)r.push(o),o=Tt();r!==i?t=e=[e,n,r]:(lt=t,t=a)}else lt=t,t=a;else lt=t,t=a;if(t===i)if(t=lt,(e=St())!==i){for(n=[],r=Tt();r!==i;)n.push(r),r=Tt();n!==i?t=e=[e,n]:(lt=t,t=a)}else lt=t,t=a;return t}function St(){var t;return 44===e.charCodeAt(lt)?(t=J,lt++):(t=i,0===mt&&gt(W)),t}function It(){var t,n,r;return t=lt,(n=function(){var t,n,r,o;return t=lt,(n=Dt())===i&&(n=u),n!==i?(46===e.charCodeAt(lt)?(r=K,lt++):(r=i,0===mt&&gt(X)),r!==i&&(o=Dt())!==i?t=n=[n,r,o]:(lt=t,t=a)):(lt=t,t=a),t===i&&(t=lt,(n=Dt())!==i?(46===e.charCodeAt(lt)?(r=K,lt++):(r=i,0===mt&&gt(X)),r!==i?t=n=[n,r]:(lt=t,t=a)):(lt=t,t=a)),t}())!==i?((r=jt())===i&&(r=u),r!==i?t=n=[n,r]:(lt=t,t=a)):(lt=t,t=a),t===i&&(t=lt,(n=Dt())!==i&&(r=jt())!==i?t=n=[n,r]:(lt=t,t=a)),t}function jt(){var t,n,r,o;return t=lt,tt.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(et)),n!==i?((r=Et())===i&&(r=u),r!==i&&(o=Dt())!==i?t=n=[n,r,o]:(lt=t,t=a)):(lt=t,t=a),t}function Et(){var t;return 43===e.charCodeAt(lt)?(t=nt,lt++):(t=i,0===mt&&gt(rt)),t===i&&(45===e.charCodeAt(lt)?(t=it,lt++):(t=i,0===mt&&gt(ot))),t}function Dt(){var t,n;if(lt,t=[],st.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(at)),n!==i)for(;n!==i;)t.push(n),st.test(e.charAt(lt))?(n=e.charAt(lt),lt++):(n=i,0===mt&&gt(at));else t=a;return t!==i&&(t=ut(t)),t}function Tt(){var t;return ct.test(e.charAt(lt))?(t=e.charAt(lt),lt++):(t=i,0===mt&&gt(ht)),t}var Rt=[0,0],Lt=[0,0],Ut=[],Nt=!0,Bt="";function Ft(t){for(var e=[],n=0;n<t.length;n++)t[n]instanceof Array?e.push.apply(e,Ft(t[n])):e.push(t[n]);return e}function qt(t,e){return-1==="mlazhvcsqt".indexOf(t)?Rt=e:(Rt[0]+=e[0],Rt[1]+=e[1]),Bt=t,Rt.slice(0)}function Ht(t,e){for(var n=[],r=Rt.slice(0),i=0;i<e.length;i+=2){Rt=r.slice(0);var o=qt(t,e.slice(i,i+2));n=n.concat(o),i==e.length-4&&(Lt=o.slice(0))}return n}function zt(){-1=="CcSsQqTt".indexOf(Bt)&&(Lt=Rt.slice(0));var t=[0,0];return t[0]=2*Rt[0]-Lt[0],t[1]=2*Rt[1]-Lt[1],t}function Gt(t,e){var n=[e,0];return"H"==t&&(n[1]=Rt[1]),qt(t,n)}function Yt(t,e){var n=[0,e];return"V"==t&&(n[0]=Rt[0]),qt(t,n)}function Vt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function Qt(t,e){var n=1;return t[0]*e[1]-t[1]*e[0]<0&&(n=-1),n*Math.acos(function(t,e,n){return Math.min(Math.max(val,e),n)}(function(t,e){(function(t,e){t[0],e[0],t[1],e[1]})(t,e),Vt(t),Vt(e)}(t,e)),-1,1)}function Zt(t,e,n,r,i,o,s){if(0!=e&&0!=n){r*=Math.PI/180,e=Math.abs(e),n=Math.abs(n);var a=function(t,e){var n=Math.cos(e),r=Math.sin(e);return[n*t[0]+r*t[1],-1*r*t[0]+n*t[1]]}(function(t,e){return[(t[0]-e[0])/2,(t[1]-e[1])/2]}(t,s),r),u=function(t,e){return[t[0]*e[0],t[1]*e[1]]}(a,a),c=Math.pow(e,2),h=Math.pow(n,2),l=Math.sqrt(u[0]/c+u[1]/h);l>1&&(e*=l,n*=l,c=Math.pow(e,2),h=Math.pow(n,2));var f=Math.sqrt(Math.abs(c*h-c*u[1]-h*u[0])/(c*u[1]+h*u[0]));i==o&&(f*=-1);var p=function(t,e){return[t*e[0],t*e[1]]}(f,[e*a[1]/n,-n*a[0]/e]),d=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(function(t,e){var n=Math.cos(e),r=Math.sin(e);return[n*t[0]-r*t[1],r*t[0]+n*t[1]]}(p,r),function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t,s)),v=[(a[0]-p[0])/e,(a[1]-p[1])/n],m=[(-1*a[0]-p[0])/e,(-1*a[1]-p[1])/n],y=Qt([1,0],v),g=y,b=y+Qt(v,m);Ut.push({type:"save",args:[]},{type:"translate",args:[d[0],d[1]]},{type:"rotate",args:[r]},{type:"scale",args:[e,n]},{type:"arc",args:[0,0,1,g,b,1-o]},{type:"restore",args:[]})}else Ut.push({type:"lineTo",args:s})}if((n=s())!==i&&lt===e.length)return n;throw n!==i&&lt<e.length&&gt({type:"end",description:"end of input"}),bt(null,vt,dt)}}}();var n=["closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","rect","arc","arcTo","ellipse","isPointInPath","isPointInStroke"];function r(t){return function(){this.ops_.push({type:t,args:Array.prototype.slice.call(arguments,0)})}}for(var i=0;i<n.length;i++){var o=n[i];e.prototype[o]=r(o)}e.prototype.addPath=function(t,e){var n=!1;e&&void 0!=e.a&&void 0!=e.b&&void 0!=e.c&&void 0!=e.d&&void 0!=e.e&&void 0!=e.f&&(n=!0,this.ops_.push({type:"save",args:[]}),this.ops_.push({type:"transform",args:[e.a,e.b,e.c,e.d,e.e,e.f]})),this.ops_=this.ops_.concat(t.ops_),n&&this.ops_.push({type:"restore",args:[]})},original_fill=t.prototype.fill,original_stroke=t.prototype.stroke,original_clip=t.prototype.clip,original_is_point_in_path=t.prototype.isPointInPath,original_is_point_in_stroke=t.prototype.isPointInStroke,t.prototype.fill=function(n){if(n instanceof e){this.beginPath();for(var r=0,i=n.ops_.length;r<i;r++){var o=n.ops_[r];t.prototype[o.type].apply(this,o.args)}original_fill.apply(this,Array.prototype.slice.call(arguments,1))}else original_fill.apply(this,arguments)},t.prototype.stroke=function(n){if(n instanceof e){this.beginPath();for(var r=0,i=n.ops_.length;r<i;r++){var o=n.ops_[r];t.prototype[o.type].apply(this,o.args)}original_stroke.call(this)}else original_stroke.call(this)},t.prototype.clip=function(n){if(n instanceof e){this.beginPath();for(var r=0,i=n.ops_.length;r<i;r++){var o=n.ops_[r];t.prototype[o.type].apply(this,o.args)}original_clip.apply(this,Array.prototype.slice.call(arguments,1))}else original_clip.apply(this,arguments)},t.prototype.isPointInPath=function(n){if(n instanceof e){this.beginPath();for(var r=0,i=n.ops_.length;r<i;r++){var o=n.ops_[r];t.prototype[o.type].apply(this,o.args)}return original_is_point_in_path.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_path.apply(this,arguments)},t.prototype.isPointInStroke=function(n){if(n instanceof e){this.beginPath();for(var r=0,i=n.ops_.length;r<i;r++){var o=n.ops_[r];t.prototype[o.type].apply(this,o.args)}return original_is_point_in_stroke.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_stroke.apply(this,arguments)},Path2D=e}()}("undefined"==typeof CanvasRenderingContext2D?void 0:CanvasRenderingContext2D)},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),s=null,a=0,u=[],c=n(7);function h(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](i.parts[s]);for(;s<i.parts.length;s++)o.parts.push(m(i.parts[s],e))}else{var a=[];for(s=0;s<i.parts.length;s++)a.push(m(i.parts[s],e));r[i.id]={id:i.id,refs:1,parts:a}}}}function l(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function f(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function p(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function d(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),v(e,t.attrs),f(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function m(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var u=a++;n=s||(s=d(e)),r=g.bind(null,n,u,!1),i=g.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),f(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=c(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),i=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){p(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=l(t,e);return h(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var s=n[o];(a=r[s.id]).refs--,i.push(a)}t&&h(l(t,e),e);for(o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete r[a.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function g(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#img-map-container {\n  display: flex;\n  flex-direction: column;\n}\n\n#img-map-canvas {\n  border: 1px solid #AAAAAA;\n}\n\n#img-map-actions, #img-map-form {\n  display: flex;\n  align-items: center;\n  padding: 8px .0 .0 3px;\n  height: auto;\n  line-height: 20px;\n}\n\n#img-map-actions {\n  justify-content: space-between;\n}\n\n#img-map-actions .img-map-btn {\n  height: 28px;\n  border: 1px solid #b3b3b3;\n  text-shadow: 0 1px 1px rgba(255,255,255,0.75);\n  padding: 4px 6px;\n  cursor: pointer;\n  /* background-color: aquamarine; */\n  box-sizing: border-box;\n}\n\n#img-map-actions .img-map-shape-select {\n  padding-right: .8px;\n}\n\n#img-map-form .img-map-url-input{\n  width: 100%;\n  margin-left: 16px;\n  padding: 5px 6px;\n  border: 1px solid #b3b3b3;\n}\n\n::placeholder {\n  color: #c3c3c3;\n}",""])},function(t,e,n){var r=n(10);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(8)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.freeze({DRAW:"draw",MOVE:"move",RESIZE:"resize"});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t&&t.__esModule}(n(1));e.default={onMouseDown:function(t,e,n){},onMouseMove:function(t,e,n){},onMouseUp:function(t,e,n){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={onMouseDown:function(t,e){t.focusedShape.select().drag().setMoveOffset(e)},onMouseMove:function(t,e){t.focusedShape.updateStartPoint(e).updateCoordinates()},onMouseUp:function(t){t.focusedShape.drop()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(3)),i=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}var s={onMouseDown:function(t,e,n){var i={start:e,end:e};t.shapeInProgress?n.shiftKey?(t.shapeInProgress.updateEndPoint(e).updateDimensions(),a.call(t)):t.shapeInProgress.updateEndPoint(e).updateDimensions():(t.shapeInProgress=(0,r.default)(t.currentDrawShape,{context:t.context,drawCoords:i}),t.shapeInProgress.updateDimensions(),t.shapes.push(t.shapeInProgress))},onMouseMove:function(t,e){t.shapeInProgress&&(t.shapeInProgress.type===i.default.POLYGON?t.shapeInProgress.updateEndPoint(e).updateDimensions(!0):t.shapeInProgress.updateEndPoint(e).updateDimensions())},onMouseUp:function(t){t.shapeInProgress&&t.shapeInProgress.type!==i.default.POLYGON&&a.call(t)}};function a(){this.shapeInProgress.finishDrawing(),this.shapeInProgress=void 0,this.shapes=this.shapes.filter(u)}function u(t){return t.getArea()>300}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(15)),i=s(n(14)),o=s(n(13));function s(t){return t&&t.__esModule?t:{default:t}}var a={draw:r.default,move:i.default,resize:o.default};e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(16)),o=u(n(12)),s=u(n(1)),a=u(n(0));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.args=e,this.canvas=e.canvas,this.context=this.canvas.getContext("2d"),this.shapeSelectors=e.shapeSelectors,this.currentDrawShape,this.currentAction,this.shapeInProgress,this.focusedShape,this.shapes=[],this.isMouseDown=!1,this.img,this.urlInput=e.urlInput,this.canvas.addEventListener("mousedown",function(t){return n.mouseDown(t)},!1),this.canvas.addEventListener("mousemove",function(t){return n.mouseMove(t)},!1),this.canvas.addEventListener("mouseup",function(t){return n.mouseUp(t)},!1),this.urlInput.addEventListener("change",function(t){return n.focusedShape.setHref(t.target.value)}),this.shapeSelectors.forEach(function(t){return t.addEventListener("change",function(){return n.setShape()},!1)})}return r(t,[{key:"render",value:function(){this.canvas.getContext&&(this.clearCanvas(),this.drawImage(),this.shapes.forEach(function(t){return t.draw()}))}},{key:"mouseDown",value:function(t){if(0===t.button){this.isMouseDown=!0;var e=this.getMouseCoords(t);this.determineAction(e),i.default[this.currentAction].onMouseDown(this,e,t),this.render()}t.preventDefault()}},{key:"mouseMove",value:function(t){if(this.isMouseDown||this.shapeInProgress&&this.shapeInProgress.inUse()){var e=this.getMouseCoords(t);i.default[this.currentAction].onMouseMove(this,e,t),this.render()}t.preventDefault()}},{key:"mouseUp",value:function(t){if(this.isMouseDown){this.isMouseDown=!1;var e=this.getMouseCoords(t);i.default[this.currentAction].onMouseUp(this,e,t),this.render()}t.preventDefault()}},{key:"getMouseCoords",value:function(t){var e=this.canvas.getBoundingClientRect(),n=Math.round(t.clientX-e.left),r=Math.round(t.clientY-e.top);return new s.default(n,r)}},{key:"clearCanvas",value:function(t){t&&(this.shapeInProgress=void 0,this.focusedShape=void 0,this.shapes=[]),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawImage()}},{key:"setShape",value:function(){var t=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.shapeSelectors)),e=t.find(function(t){return t.checked});this.currentDrawShape=void 0!==e?a.default[e.value.toUpperCase()]:a.default.CIRCLE,e||(t.find(function(t){return t.value===a.default.CIRCLE}).checked=!0)}},{key:"determineAction",value:function(t){var e=this.shapes.find(function(e){return e.contains(t)});if(e){if(e.drawing)return;this.setFocusedShape(e),this.currentAction=o.default.MOVE}else this.setFocusedShape(),this.currentAction=o.default.DRAW}},{key:"setFocusedShape",value:function(t){t?(this.removeFocusedShape(),this.focusedShape=t,this.urlInput.value=this.focusedShape.href):(this.removeFocusedShape(),this.urlInput.value="")}},{key:"removeFocusedShape",value:function(){this.focusedShape&&(this.urlInput.blur(),this.focusedShape.deselect())}},{key:"deleteMap",value:function(){if(this.focusedShape){var t=this.shapes.findIndex(function(t){return t.selected});this.shapes.splice(t,1),this.focusedShape=void 0,this.render()}}},{key:"loadImage",value:function(){var t=this;this.img=new Image,this.img.onload=function(){t.drawImage(),t.shapes.forEach(function(t){return t.draw()})},this.img.height=this.args.img.height,this.img.width=this.args.img.width,this.img.src=this.args.img.src}},{key:"drawImage",value:function(){var t,e=[0,0,this.canvas.width,this.canvas.height];this.context.imageSmoothingEnabled=!1,(t=this.context).drawImage.apply(t,[this.img].concat(e))}},{key:"init",value:function(){var t=this;this.setShape(),this.loadImage(),this.args.map.areas.forEach(function(e){var n=e.toShape(t.context);t.shapes.push(n)})}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="polygon",n.dimensions.shape=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"draw",value:function(){var t=this;this.path=new Path2D,this.path.moveTo(this.dimensions.shape[0].x,this.dimensions.shape[0].y),this.dimensions.shape.forEach(function(e){t.path.lineTo(e.x,e.y)}),this.drawing&&this.path.lineTo(this.endPoint.x,this.endPoint.y),this.path.closePath(),this.context.strokeStyle=this.strokeStyle,this.context.stroke(this.path)}},{key:"getArea",value:function(){var t=this.dimensions.shape,e=t.length,n=0,r=e-1;if(e>2)for(var i=0;i<e;i++)n+=t[r].x*t[i].y,n-=t[i].x*t[r].y,r=i;return Math.round(Math.abs(n)/2)}},{key:"getAreaCoords",value:function(){return this.dimensions.shape}},{key:"updateDimensions",value:function(t){var e=this;if(!t)return this.dimensions.shape.find(function(t){return t.x===e.endPoint.x&&t.y===e.endPoint.y})||this.dimensions.shape.push({x:Math.round(this.endPoint.x),y:Math.round(this.endPoint.y)}),this.dimensions.shape=this.dimensions.shape,this}},{key:"updateCoordinates",value:function(){var t=this.startPoint.x-Math.abs(this.dimensions.shape[0].x),e=this.startPoint.y-Math.abs(this.dimensions.shape[0].y),n=this.dimensions.shape.map(function(n){return{x:n.x+t,y:n.y+e}});return this.dimensions.shape=n,this}},{key:"calcDrawCoords",value:function(){return this.startPoint=this.dimensions.shape[0],this.endPoint=Object.assign({},this.startPoint),this.moveOffSet=Object.assign({},this.startPoint),this}}]),e}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="rect",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"draw",value:function(){this.path=new Path2D,this.path.rect(this.dimensions.shape.x,this.dimensions.shape.y,this.dimensions.shape.w,this.dimensions.shape.h),this.context.strokeStyle=this.strokeStyle,this.context.stroke(this.path)}},{key:"getArea",value:function(){return this.dimensions.shape.w*this.dimensions.shape.h}},{key:"getAreaCoords",value:function(){return this.dimensions.shape}},{key:"updateDimensions",value:function(){var t=this.endPoint.x-this.startPoint.x,e=this.endPoint.y-this.startPoint.y;return this.dimensions.shape={x:this.startPoint.x,y:this.startPoint.y,w:Math.round(t),h:Math.round(e)},this.dimensions.frame=Object.assign({},this.dimensions.shape),this}},{key:"updateCoordinates",value:function(){return this.dimensions.shape=Object.assign(this.dimensions.shape,{x:this.startPoint.x,y:this.startPoint.y}),this.dimensions.frame=Object.assign({},this.dimensions.shape),this}},{key:"calcDrawCoords",value:function(){return this.startPoint={x:this.dimensions.shape.x,y:this.dimensions.shape.y},this.endPoint={x:this.dimensions.shape.x+this.dimensions.shape.w,y:this.dimensions.shape.y+this.dimensions.shape.h},this.moveOffSet=Object.assign({},this.startPoint),this}}]),e}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="circle",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"draw",value:function(){this.drawing&&(this.context.strokeStyle="#E2E2E2",this.context.strokeRect(this.dimensions.frame.x,this.dimensions.frame.y,this.dimensions.frame.w,this.dimensions.frame.h)),this.path=new Path2D,this.path.arc(this.dimensions.shape.cx,this.dimensions.shape.cy,Math.abs(this.dimensions.shape.r),0,2*Math.PI,!1),this.path.closePath(),this.context.strokeStyle=this.strokeStyle,this.context.stroke(this.path)}},{key:"getArea",value:function(){var t=this.getAreaCoords().r;return Math.round(Math.PI*Math.pow(t,2))}},{key:"getAreaCoords",value:function(){return{cx:this.dimensions.shape.cx,cy:this.dimensions.shape.cy,r:this.dimensions.shape.r}}},{key:"updateDimensions",value:function(){this.calculateBoundingBox();var t={cx:Math.round(this.dimensions.frame.x+this.dimensions.frame.w/2),cy:Math.round(this.dimensions.frame.y+this.dimensions.frame.h/2),r:Math.round(Math.abs(this.dimensions.frame.w/2))};return this.dimensions.shape=t,this}},{key:"updateCoordinates",value:function(){return this.dimensions.frame=Object.assign(this.dimensions.frame,{x:this.startPoint.x,y:this.startPoint.y}),this.dimensions.shape=Object.assign(this.dimensions.shape,{cx:Math.round(this.dimensions.frame.x+this.dimensions.frame.w/2),cy:Math.round(this.dimensions.frame.y+this.dimensions.frame.h/2),r:Math.round(Math.abs(this.dimensions.frame.w/2))}),this}},{key:"calcDrawCoords",value:function(){return this.startPoint={x:Math.round(this.dimensions.shape.cx-this.dimensions.shape.r),y:Math.round(this.dimensions.shape.cy-this.dimensions.shape.r)},this.endPoint={x:Math.round(this.dimensions.shape.cx+this.dimensions.shape.r),y:Math.round(this.dimensions.shape.cy+this.dimensions.shape.r)},this.moveOffSet=Object.assign({},this.startPoint),this.calculateBoundingBox(),this}},{key:"calculateBoundingBox",value:function(){var t=0,e=0,n=Math.abs(this.endPoint.x-this.startPoint.x),r=Math.abs(this.endPoint.y-this.startPoint.y);return n<r?(t=n*(this.endPoint.x<this.startPoint.x?-1:1),e=n*(this.endPoint.y<this.startPoint.y?-1:1)):(t=r*(this.endPoint.x<this.startPoint.x?-1:1),e=r*(this.endPoint.y<this.startPoint.y?-1:1)),this.dimensions.frame={x:this.startPoint.x,y:this.startPoint.y,w:Math.round(t),h:Math.round(e)},this}}]),e}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(4));var i={load:function(t){return t.map(function(t){return new r.default(t.shape,t.coords,t.href)})},write:function(t,e){var n=document.app,r=t.dom.select("map").length>0?t.dom.select("map")[0]:function(t,e){var n=e.parentNode,r=function(t){for(var e="tinymce-map",n=1;t.find(function(t){return t.name===e});)e="tinymce-map"+n,n++;return e}(Array.from(t.dom.select("map")));return t.dom.add(n,"map",{id:r,name:r}),e.useMap=r,t.dom.select("map")[0]}(t,e);!function(t){if(t)for(var e=Array.from(t.children),n=0;n<e.length;n++)t.removeChild(e[n])}(r),n.shapes.forEach(function(e){var n=e.toMapArea(),i=Object.assign(t.dom.create("area"),n);r.append(i)})}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(21)),i=o(n(17));function o(t){return t&&t.__esModule?t:{default:t}}n(11);var s={createDialogHtml:function(t){return new Promise(function(e){var n=document.getElementById("img-map-container"),r=t.dom.create("canvas",{id:"img-map-canvas"});n.appendChild(r);var i=t.dom.create("div",{id:"img-map-actions"});i.innerHTML='\n    <span class="img-map-selection">\n      <span class="img-map-shape-select">\n        <input type="radio" name="shapeSelect" id="shape1" value="circle">\n        <label for="shape1">Circle</label>\n      </span>\n      <span class="img-map-shape-select">\n        <input type="radio" name="shapeSelect" id="shape2" value="rectangle">\n        <label for="shape2">Rectangle</label>\n      </span>\n      <span class="img-map-shape-select">\n        <input type="radio" name="shapeSelect" id="shape3" value="polygon">\n        <label for="shape3">Polygon</label>\n      </span>\n    </span>\n    <span class="img-map-buttons">\n      <button type="button" class="img-map-btn" onclick="app.clearCanvas(true)">Clear</button>\n      <button type="button" class="img-map-btn" onclick="app.deleteMap()">Delete Focused</button>\n    </span>\n  ',n.appendChild(i);var o=t.dom.create("form",{id:"img-map-form"});o.innerHTML='\n    <label for="url">URL: </label>\n    <input type="url" id="map-url-input" name="map-url-input" class="img-map-url-input" placeholder="https://www.validurl.com" required/>\n  ',n.appendChild(o),e(n)})},initApp:function(t,e){var n=t.dom.select("map").find(function(t){return t.name===e.useMap}),o=""===e.useMap?[]:r.default.load(Array.from(n.children)),s=document.getElementById("img-map-canvas");s.setAttribute("height",e.height),s.setAttribute("width",e.width);var a=document.getElementById("map-url-input"),u=document.getElementsByName("shapeSelect"),c={canvas:s,img:{src:e.src,height:e.height,width:e.width,useMap:e.useMap},map:{name:e.useMap,areas:o},shapeSelectors:u,urlInput:a},h=new i.default(c);document.app=h,h.init()},destroy:function(t,e){document.getElementById("map-url-input").blur(),r.default.write(t,e),document.app={},document.getElementById("img-map-container").innerHTML=""}};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(22));var i=function(t){if("IMG"===t.selection.getNode().nodeName){var e=t.selection.getNode();t.windowManager.open({title:"Manage Image Maps",body:[{type:"container",layout:"flex",direction:"column",align:"center",html:'<div id="img-map-container"></div>',minHeight:e.height+80,minWidth:e.width}],buttons:[{text:"Done",onclick:"submit"}],onsubmit:function(){r.default.destroy(t,e)}}),r.default.createDialogHtml(t).then(function(){return r.default.initApp(t,e)})}};e.default=function(t){t.addMenuItem("tinymceImageMap",{text:"Image Map",onclick:function(){return i(t)}}),t.addButton("tinymceImageMap",{text:"Image Map",icon:!1,onclick:function(){return i(t)}})}},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(23));n(6),tinymce.PluginManager.add("tinymceImageMap",r.default)}]);